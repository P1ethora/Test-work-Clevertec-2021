# Test-work-Clevertec-2021
Задание доступно по [Ссылке](https://drive.google.com/file/d/10F5ba0dmUw3FbD2Ky9qQhPQve7lONdhG/view?usp=sharing)

Приложение представляет собой RESTful web-service, реализующей функционал системы управления новостями.

## Реализация:
- В качестве сборщика Использован Gradle
- Натройки проекта содержатся в .yml файлах
- В приложение включена возможность выбора Spring профиля, которые представлены:
  test
  Использует внутреннюю базу данных H2 и автоматически заполняет ее 20-ю новостями каждая из которых имеет 10 комментариев
  prod 
  Использует внешнюю базу данных PostgreSQL.
- Сущности веб интерфейса автоматически создаются при сборке проекта. Для этого используется .proto файл

Переключение между профилями осуществляется через **application.yml**

```yml
server:
  port: 10900
spring:
  profiles:
    active: test
```

## Основые API:
- CRUD для работы с новостью
- CRUD для работы с комментарием
- просмотр списка новостей (с пагинацией)
- просмотр новости с комментариями относящимися к ней (с пагинацией)
- полнотекстовый поиск по различным параметрам

## Работа с запросами API:
### Новости:

- Получить конкретную новость можно по запросу:
```ruby
[GET]   /news/1{?size=2&page=0}
```
параметры в запросе регулируют постраничное отображение комментариев


- Получить заголовки новостей и колличество комментариев в каждой новости:
```ruby
[GET]   /news?size=2&page=0
```


- Так же можно получить все новости в постраничном отображении:
```ruby
[GET]   /news/all?size=2&page=0
```


- Добавление новости:
```ruby
[POST]   /news
```
и тело:
```json
{
"title": "Test News",
"text": "This is news, just like that"
}
```


- Обновление новости:
```ruby
[PUT]   /news
```
и тело с новостью:
```json
{
"id": "21",
  "date": "2021-07-20 14:39:56.043",
  "title": "Test News",
  "text": "This is news"
  }
  ```
  
  
- Удаление новости:
```ruby
[DELETE]   /news/21
```
### Комментарии:

- Для удаление комментария используйте:
```ruby
[DELETE]   /news/{id news}/comment/{id comment}
```
при этом id news не играет роль


- Если необходимо подзагрузить комментарии, то используйте:
```ruby
[GET]   /news/{id news}/comment{?page=2&size=2}
```
где page является номером страницы, а size соответственно количество элементов
по умолчанию количество элементов равно 5.
нумерация страниц начинается с 0.


- Добавить комментарий возможно по запросу:
```ruby
[POST]   /news/{id news}/comment
```
и json тела:
```json
{
"username":"test User",
"text":"test comment"
}
```


- Обновляется комментарий  с помощью:
```ruby
[PUT]   /news/{id news}/comment
```
и тела комментария
```json
{
    "id": "201",
    "date": "2021-07-20 13:48:52.328",
    "text": "test",
    "username": "test User"
  }
  ```
{id news} не играет роли


### Поиск:
```ruby
[GET]   /news/search/{keyword}?param=text
```
допустимые параметры:
* text
* title
